<!-- Pagination navigation -->
<div class="pagination">
    <ul>
        <!-- Previous Page Link -->
        {% if page > 1 %}
            <li><a href="{{ url_for('search', query=query, page=page-1) }}">Previous</a></li>
        {% else %}
            <li class="disabled">Previous</li>
        {% endif %}

        <!-- First Page -->
        <li><a href="{{ url_for('search', query=query, page=1) }}">1</a></li>

        <!-- Show ellipsis if there are more pages before the current page -->
        {% if page > 3 %}
            <li><span>...</span></li>
        {% endif %}

        <!-- Show up to 5 pages before the current page -->
        {% for p in range(max(2, page-2), min(page+3, total_pages+1)) %}
            {% if p == page %}
                <li class="active">{{ p }}</li>
            {% else %}
                <li><a href="{{ url_for('search', query=query, page=p) }}">{{ p }}</a></li>
            {% endif %}
        {% endfor %}

        <!-- Show ellipsis if there are more pages after the current page -->
        {% if page < total_pages - 2 %}
            <li><span>...</span></li>
        {% endif %}

        <!-- Last Page -->
        <li><a href="{{ url_for('search', query=query, page=total_pages) }}">{{ total_pages }}</a></li>

        <!-- Next Page Link -->
        {% if page < total_pages %}
            <li><a href="{{ url_for('search', query=query, page=page+1) }}">Next</a></li>
        {% else %}
            <li class="disabled">Next</li>
        {% endif %}
    </ul>
</div>
